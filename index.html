<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaskGarden</title>
  <meta name="theme-color" content="#0f1221" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-gradient" aria-hidden="true"></div>

  <!-- PIN (local) -->
  <div id="pin-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="pin-title">
    <div class="modal-content">
      <button class="modal-close" data-close="pin-modal" aria-label="Cerrar">×</button>
      <h2 id="pin-title">Desbloquear</h2>
      <input type="password" id="pin-input" inputmode="numeric" pattern="[0-9]*" placeholder="PIN (4 dígitos)" />
      <div class="row gap-sm">
        <button id="pin-submit-btn" class="btn btn-primary">Desbloquear</button>
        <button id="pin-set-btn" class="btn">Configurar/Actualizar</button>
        <button id="pin-disable-btn" class="btn btn-ghost">Quitar PIN</button>
      </div>
      <small class="subtle">El PIN se guarda localmente en este dispositivo.</small>
    </div>
  </div>

  <div id="app" class="shell">
    <header class="app-header">
      <div class="title-wrap">
        <h1 class="brand">TaskGarden</h1>
        <p class="subtitle">Tu espacio mental. Organiza, respira, evoluciona.</p>
      </div>
      <div class="status-wrap">
        <div id="avatar-emocional" class="avatar" aria-live="polite">😊</div>
        <div id="today-counter" class="chip" title="Tareas completadas hoy">Hoy: 0 ✔️</div>
        <button id="modo-calma-btn" class="icon-btn" title="Modo calma">🧘</button>
        <button id="day-night-toggle" class="icon-btn" title="Modo día/noche">🌙</button>
        <button id="settings-btn" class="icon-btn" title="Configuraciones">⚙️</button>
      </div>
    </header>

    <!-- Estado emocional -->
    <section id="emocional-cards" class="grid-emotions">
      <button class="emocion-card selected" data-emocion="feliz"><span class="emoji">😊</span><span>Feliz</span></button>
      <button class="emocion-card" data-emocion="triste"><span class="emoji">😢</span><span>Triste</span></button>
      <button class="emocion-card" data-emocion="estresado"><span class="emoji">😣</span><span>Estresado</span></button>
      <button class="emocion-card" data-emocion="calmo"><span class="emoji">😌</span><span>Calmo</span></button>
    </section>

    <!-- Nueva tarea -->
    <section id="add-task" class="add-task">
      <div class="input-group">
        <input type="text" id="task-input" placeholder="Nueva tarea…" list="task-suggestions" autocomplete="off" />
        <datalist id="task-suggestions"></datalist>
        <button id="add-task-btn" class="btn-circle" aria-label="Agregar tarea">+</button>
      </div>
      <div class="input-group search-wrap">
        <span class="search-icon">🔎</span>
        <input type="text" id="search-input" placeholder="Buscar / filtrar (atajo: / )" autocomplete="off" />
        <button id="clear-search-btn" class="btn" aria-label="Limpiar búsqueda">×</button>
      </div>
    </section>

    <!-- Espacios -->
    <nav id="spaces" class="spaces">
      <button class="space-btn active" data-space="personal">Personal</button>
      <button class="space-btn" data-space="trabajo">Trabajo</button>
      <button class="space-btn" data-space="creatividad">Creatividad</button>
    </nav>

    <!-- Calendario -->
    <section id="calendar-section" class="calendar-section">
      <div class="calendar-root glass">
        <div class="calendar-header">
          <button class="nav-pill" id="prev-month" aria-label="Mes anterior">‹</button>
          <span id="calendar-month" class="month-label">Agosto 2025</span>
          <button class="nav-pill" id="next-month" aria-label="Mes siguiente">›</button>
        </div>
        <div id="calendar-grid" class="calendar-grid" aria-label="Calendario"></div>
      </div>
      <div id="calendar-tasks" class="calendar-tasks glass"></div>
    </section>

    <!-- Lista -->
    <section id="task-list-section" class="list-section">
      <ul id="task-list" class="task-list" aria-live="polite"></ul>
    </section>

    <!-- Semana emocional -->
    <section id="weekly-emotion-report" class="weekly">
      <h3 class="kicker">Tu semana emocional</h3>
      <div class="emotion-bar glass">
        <span class="emotion-day">L 😊</span>
        <span class="emotion-day">M 😊</span>
        <span class="emotion-day">X 😣</span>
        <span class="emotion-day">J 😌</span>
        <span class="emotion-day">V 😢</span>
        <span class="emotion-day">S –</span>
        <span class="emotion-day">D –</span>
      </div>
    </section>

    <!-- Stats (placeholder) -->
    <section id="stats-section" class="hidden">
      <h2>Estadísticas</h2>
      <div id="stats-emotions" class="glass" style="height:180px"></div>
      <div id="stats-productivity" class="glass" style="height:180px"></div>
    </section>

    <!-- Settings -->
    <section id="settings-section" class="settings hidden">
      <h2>Configuraciones</h2>

      <div class="settings-row glass">
        <label for="background-selector">Fondo</label>
        <select id="background-selector">
          <option value="default">Predeterminado</option>
          <option value="ocean">Océano</option>
          <option value="forest">Bosque</option>
          <option value="sunset">Atardecer</option>
        </select>
      </div>

      <div class="settings-row glass">
        <label for="avatar-selector">Avatar</label>
        <select id="avatar-selector">
          <option value="default">Predeterminado</option>
          <option value="cat">Gato</option>
          <option value="dog">Perro</option>
          <option value="bird">Pájaro</option>
        </select>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Auto Día/Noche</label>
        <input type="checkbox" id="auto-theme-toggle" />
        <small class="hint">Se adapta a la hora local (7–19h día)</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Sonido al completar</label>
        <input type="checkbox" id="sound-toggle" />
        <small class="hint">Un “beep” suave al marcar ✔️</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Recordatorios</label>
        <button id="notif-permission-btn" class="btn">Permitir / Probar 🔔</button>
        <small class="hint">Los recordatorios funcionan con la pestaña abierta.</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Bolitas Anti‑Stress</label>
        <button id="open-antistress-btn" class="btn">Abrir</button>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Bloqueo con PIN</label>
        <button id="open-pin-btn" class="btn">Abrir</button>
      </div>
    </section>

    <footer id="semana-resumen" class="footer">Tu semana: 😊😊😣😌😢</footer>
  </div>

  <!-- Focus -->
  <div id="focus-mode" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="focus-title">
    <div class="modal-content">
      <button class="modal-close" data-close="focus-mode" aria-label="Cerrar">×</button>
      <h2 id="focus-title">Modo Enfoque</h2>
      <div id="focus-task" class="focus-task"></div>
      <div id="pomodoro-timer" class="pomodoro">25:00</div>
      <div class="row gap-sm">
        <button id="pomodoro-start-btn" class="btn btn-primary">Iniciar</button>
        <button id="pomodoro-reset-btn" class="btn btn-ghost">Reiniciar</button>
      </div>
    </div>
  </div>

  <!-- Modal Día -->
  <div id="day-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="day-title">
    <div class="modal-content">
      <button class="modal-close" data-close="day-modal" aria-label="Cerrar">×</button>
      <h2 id="day-title" class="modal-title">Día seleccionado</h2>
      <p id="modal-emotion" class="muted">Emoción: 😊</p>
      <p id="modal-notification" class="notice hidden">Hoy no registraste cómo te sentís 🧠</p>
      <div class="input-group">
        <input type="text" id="modal-task-input" placeholder="Nueva tarea…" />
        <button id="modal-add-task-btn" class="btn">+</button>
      </div>
      <textarea id="modal-task-notes" placeholder="Notas de la tarea…" class="notes"></textarea>
      <div id="modal-tasks" class="modal-tasks">Tareas del día</div>
    </div>
  </div>

  <!-- Modal Recordatorio (selector fecha/hora premium) -->
  <div id="reminder-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="rem-title">
    <div class="modal-content">
      <button class="modal-close" data-close="reminder-modal" aria-label="Cerrar">×</button>
      <h2 id="rem-title">Programar recordatorio</h2>
      <p class="muted" id="reminder-for">Para: —</p>
      <div class="input-group">
        <input type="datetime-local" id="reminder-dt" />
        <button id="reminder-clear-btn" class="btn">Quitar</button>
        <button id="reminder-save-btn" class="btn btn-primary">Guardar</button>
      </div>
      <small class="hint">Sugerencia: ⌘/Ctrl+N para nueva tarea • / para buscar</small>
    </div>
  </div>

  <!-- Anti-stress -->
  <div id="antistress-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="as-title">
    <div class="modal-content as-content">
      <button class="modal-close" id="close-antistress-modal" aria-label="Cerrar">×</button>
      <h2 id="as-title">Burbujas Anti‑Stress</h2>
      <div id="antistress-bubbles-container" class="as-bubbles"></div>
      <p class="hint">¡Toca las burbujas para explotarlas!</p>
    </div>
  </div>

  <!-- Snackbar / Toast -->
  <div id="snackbar" class="snackbar" aria-live="polite"></div>

  <button id="floating-add-btn" class="fab" aria-label="Tareas de hoy">+</button>

  <script src="script.js"></script>
</body>
</html>
