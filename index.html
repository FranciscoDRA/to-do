<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaskGarden</title>
  <meta name="theme-color" content="#0f1221" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-gradient" aria-hidden="true"></div>

  <!-- PIN (local) -->
  <div id="pin-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="pin-title">
    <div class="modal-content">
      <button class="modal-close" data-close="pin-modal" aria-label="Cerrar">Ã—</button>
      <h2 id="pin-title">Desbloquear</h2>
      <input type="password" id="pin-input" inputmode="numeric" pattern="[0-9]*" placeholder="PIN (4 dÃ­gitos)" />
      <div class="row gap-sm">
        <button id="pin-submit-btn" class="btn btn-primary">Desbloquear</button>
        <button id="pin-set-btn" class="btn">Configurar/Actualizar</button>
        <button id="pin-disable-btn" class="btn btn-ghost">Quitar PIN</button>
      </div>
      <small class="subtle">El PIN se guarda localmente en este dispositivo.</small>
    </div>
  </div>

  <div id="app" class="shell">
    <header class="app-header">
      <div class="title-wrap">
        <h1 class="brand">TaskGarden</h1>
        <p class="subtitle">Tu espacio mental. Organiza, respira, evoluciona.</p>
      </div>
      <div class="status-wrap">
        <div id="avatar-emocional" class="avatar" aria-live="polite">ğŸ˜Š</div>
        <div id="today-counter" class="chip" title="Tareas completadas hoy">Hoy: 0 âœ”ï¸</div>
        <button id="modo-calma-btn" class="icon-btn" title="Modo calma">ğŸ§˜</button>
        <button id="day-night-toggle" class="icon-btn" title="Modo dÃ­a/noche">ğŸŒ™</button>
        <button id="settings-btn" class="icon-btn" title="Configuraciones">âš™ï¸</button>
      </div>
    </header>

    <!-- Estado emocional -->
    <section id="emocional-cards" class="grid-emotions">
      <button class="emocion-card selected" data-emocion="feliz"><span class="emoji">ğŸ˜Š</span><span>Feliz</span></button>
      <button class="emocion-card" data-emocion="triste"><span class="emoji">ğŸ˜¢</span><span>Triste</span></button>
      <button class="emocion-card" data-emocion="estresado"><span class="emoji">ğŸ˜£</span><span>Estresado</span></button>
      <button class="emocion-card" data-emocion="calmo"><span class="emoji">ğŸ˜Œ</span><span>Calmo</span></button>
    </section>

    <!-- Nueva tarea -->
    <section id="add-task" class="add-task">
      <div class="input-group">
        <input type="text" id="task-input" placeholder="Nueva tareaâ€¦" list="task-suggestions" autocomplete="off" />
        <datalist id="task-suggestions"></datalist>
        <button id="add-task-btn" class="btn-circle" aria-label="Agregar tarea">+</button>
      </div>
      <div class="input-group search-wrap">
        <span class="search-icon">ğŸ”</span>
        <input type="text" id="search-input" placeholder="Buscar / filtrar (atajo: / )" autocomplete="off" />
        <button id="clear-search-btn" class="btn" aria-label="Limpiar bÃºsqueda">Ã—</button>
      </div>
    </section>

    <!-- Espacios -->
    <nav id="spaces" class="spaces">
      <button class="space-btn active" data-space="personal">Personal</button>
      <button class="space-btn" data-space="trabajo">Trabajo</button>
      <button class="space-btn" data-space="creatividad">Creatividad</button>
    </nav>

    <!-- Calendario -->
    <section id="calendar-section" class="calendar-section">
      <div class="calendar-root glass">
        <div class="calendar-header">
          <button class="nav-pill" id="prev-month" aria-label="Mes anterior">â€¹</button>
          <span id="calendar-month" class="month-label">Agosto 2025</span>
          <button class="nav-pill" id="next-month" aria-label="Mes siguiente">â€º</button>
        </div>
        <div id="calendar-grid" class="calendar-grid" aria-label="Calendario"></div>
      </div>
      <div id="calendar-tasks" class="calendar-tasks glass"></div>
    </section>

    <!-- Lista -->
    <section id="task-list-section" class="list-section">
      <ul id="task-list" class="task-list" aria-live="polite"></ul>
    </section>

    <!-- Semana emocional -->
    <section id="weekly-emotion-report" class="weekly">
      <h3 class="kicker">Tu semana emocional</h3>
      <div class="emotion-bar glass">
        <span class="emotion-day">L ğŸ˜Š</span>
        <span class="emotion-day">M ğŸ˜Š</span>
        <span class="emotion-day">X ğŸ˜£</span>
        <span class="emotion-day">J ğŸ˜Œ</span>
        <span class="emotion-day">V ğŸ˜¢</span>
        <span class="emotion-day">S â€“</span>
        <span class="emotion-day">D â€“</span>
      </div>
    </section>

    <!-- Stats (placeholder) -->
    <section id="stats-section" class="hidden">
      <h2>EstadÃ­sticas</h2>
      <div id="stats-emotions" class="glass" style="height:180px"></div>
      <div id="stats-productivity" class="glass" style="height:180px"></div>
    </section>

    <!-- Settings -->
    <section id="settings-section" class="settings hidden">
      <h2>Configuraciones</h2>

      <div class="settings-row glass">
        <label for="background-selector">Fondo</label>
        <select id="background-selector">
          <option value="default">Predeterminado</option>
          <option value="ocean">OcÃ©ano</option>
          <option value="forest">Bosque</option>
          <option value="sunset">Atardecer</option>
        </select>
      </div>

      <div class="settings-row glass">
        <label for="avatar-selector">Avatar</label>
        <select id="avatar-selector">
          <option value="default">Predeterminado</option>
          <option value="cat">Gato</option>
          <option value="dog">Perro</option>
          <option value="bird">PÃ¡jaro</option>
        </select>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Auto DÃ­a/Noche</label>
        <input type="checkbox" id="auto-theme-toggle" />
        <small class="hint">Se adapta a la hora local (7â€“19h dÃ­a)</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Sonido al completar</label>
        <input type="checkbox" id="sound-toggle" />
        <small class="hint">Un â€œbeepâ€ suave al marcar âœ”ï¸</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Recordatorios</label>
        <button id="notif-permission-btn" class="btn">Permitir / Probar ğŸ””</button>
        <small class="hint">Los recordatorios funcionan con la pestaÃ±a abierta.</small>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Bolitas Antiâ€‘Stress</label>
        <button id="open-antistress-btn" class="btn">Abrir</button>
      </div>

      <div class="settings-row glass">
        <label class="label-col">Bloqueo con PIN</label>
        <button id="open-pin-btn" class="btn">Abrir</button>
      </div>
    </section>

    <footer id="semana-resumen" class="footer">Tu semana: ğŸ˜ŠğŸ˜ŠğŸ˜£ğŸ˜ŒğŸ˜¢</footer>
  </div>

  <!-- Focus -->
  <div id="focus-mode" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="focus-title">
    <div class="modal-content">
      <button class="modal-close" data-close="focus-mode" aria-label="Cerrar">Ã—</button>
      <h2 id="focus-title">Modo Enfoque</h2>
      <div id="focus-task" class="focus-task"></div>
      <div id="pomodoro-timer" class="pomodoro">25:00</div>
      <div class="row gap-sm">
        <button id="pomodoro-start-btn" class="btn btn-primary">Iniciar</button>
        <button id="pomodoro-reset-btn" class="btn btn-ghost">Reiniciar</button>
      </div>
    </div>
  </div>

  <!-- Modal DÃ­a -->
  <div id="day-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="day-title">
    <div class="modal-content">
      <button class="modal-close" data-close="day-modal" aria-label="Cerrar">Ã—</button>
      <h2 id="day-title" class="modal-title">DÃ­a seleccionado</h2>
      <p id="modal-emotion" class="muted">EmociÃ³n: ğŸ˜Š</p>
      <p id="modal-notification" class="notice hidden">Hoy no registraste cÃ³mo te sentÃ­s ğŸ§ </p>
      <div class="input-group">
        <input type="text" id="modal-task-input" placeholder="Nueva tareaâ€¦" />
        <button id="modal-add-task-btn" class="btn">+</button>
      </div>
      <textarea id="modal-task-notes" placeholder="Notas de la tareaâ€¦" class="notes"></textarea>
      <div id="modal-tasks" class="modal-tasks">Tareas del dÃ­a</div>
    </div>
  </div>

  <!-- Modal Recordatorio (selector fecha/hora premium) -->
  <div id="reminder-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="rem-title">
    <div class="modal-content">
      <button class="modal-close" data-close="reminder-modal" aria-label="Cerrar">Ã—</button>
      <h2 id="rem-title">Programar recordatorio</h2>
      <p class="muted" id="reminder-for">Para: â€”</p>
      <div class="input-group">
        <input type="datetime-local" id="reminder-dt" />
        <button id="reminder-clear-btn" class="btn">Quitar</button>
        <button id="reminder-save-btn" class="btn btn-primary">Guardar</button>
      </div>
      <small class="hint">Sugerencia: âŒ˜/Ctrl+N para nueva tarea â€¢ / para buscar</small>
    </div>
  </div>

  <!-- Anti-stress -->
  <div id="antistress-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="as-title">
    <div class="modal-content as-content">
      <button class="modal-close" id="close-antistress-modal" aria-label="Cerrar">Ã—</button>
      <h2 id="as-title">Burbujas Antiâ€‘Stress</h2>
      <div id="antistress-bubbles-container" class="as-bubbles"></div>
      <p class="hint">Â¡Toca las burbujas para explotarlas!</p>
    </div>
  </div>

  <!-- Snackbar / Toast -->
  <div id="snackbar" class="snackbar" aria-live="polite"></div>

  <button id="floating-add-btn" class="fab" aria-label="Tareas de hoy">+</button>

  <script src="script.js"></script>
</body>
</html>
